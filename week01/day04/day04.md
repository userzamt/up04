# День 04. PowerShell. SSH. CRON. ВВод в домен. Gitea

## SSH
Функция удаленного взаимодействия PowerShell обычно использует службу *WinRM* для согласования соединения и передачи данных. Теперь протокол SSH доступен на платформах Linux и Windows, что позволяет осуществлять многоплатформенное удаленное взаимодействие с PowerShell.

*SSH* (англ. Secure Shell — «безопасная оболочка») — сетевой протокол прикладного уровня, позволяющий производить удалённое управление операционной системой и туннелирование TCP-соединений (например, для передачи файлов). Шифрует весь трафик, включая и передаваемые пароли. SSH допускает выбор различных алгоритмов шифрования. SSH-клиенты и SSH-серверы доступны для большинства сетевых операционных систем.

Удаленное взаимодействие по SSH позволяет осуществлять базовое удаленное взаимодействие между компьютерами с Windows и Linux в рамках сеансов PowerShell. Функция удаленного взаимодействия по SSH создает хост-процесс PowerShell на целевом компьютере в качестве подсистемы SSH. 

Решение **OpenSSH** для Windows теперь доступно в Windows 10 сборки 1809 и Windows Server 2019. 

Установка модуля **OpenSSH**(клиента *ssh.exe*)
```powershell
Get-WindowsCapability -Online | where name -like "*OpenSSH*"

Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
```

Подключение к ПК по SSH
```bash
ssh user@192.168.1.1
```

## CRON
**cron** - это планировщик, который позволяет выполнять нужные вам скрипты раз в час, раз в день, неделю или месяц, а также в любое заданное вами время или через любой интервал. Программа часто используется даже другими службами операционной системы. 

 Его основная задача выполнять нужные процессы в нужное время. Существует несколько конфигурационных файлов, из которых он берет информацию о том что и когда нужно выполнять.

+ `/etc/cron.minutely` - каждую минуту;
+ `/etc/cron.hourly` - каждый час;
+ `/etc/cron.daily` - каждый день;
+ `/etc/cron.weekly` - каждую неделю;
+ `/etc/cron.monthly` - каждый месяц.

```powershell
# редактирование планировщика заданий
crontab -e

# список заданий
crontab -l
```

## gitea
**Gitea** — ПО для хостинга IT-проектов и совместной разработки на базе Git.

[Установка Gitea из bin](https://docs.gitea.com/installation/install-from-binary)

Файлы, заканчивающиеся расширением **.bin**, обычно представляют собой установочные двоичные файлы, которые Вы можете выполнить для установки программы. Прежде чем запустить установочный файл **.bin**, нужно сделать его исполняемым с помощью команды `chmod`.

Есть два типа бинарных (.bin) файлов – самораспаковывающиеся архивы и программы/


## Практическое задание
>[!CAUTION]
> Все проделанные Вами действия должны быть отражены в отчёте в виде скриншотов

1. Подключиться к РЕД ОС с помощью *TightVNC* и ввести виртуальную машину в домен *up04.local*. DNS-сервер находится по адресу 10.207.106.24. Ввод в домен производить с помощью графических утилит. Перезагрузите виртуальную машину и войдите в систему под доменной учетной записью.

>[!IMPORTANT]
>[Документация РЕД ОС. Предварительная подготовка компьютера к вводу в домен](https://redos.red-soft.ru/base/arm/arm-domen/arm-msad/prejoindomain/)

1. На локальную машину установить модуль **OpenSSH.Client**. 

2. Подключитесь по *ssh* к виртуальной машине использую доменную учетную запись. Произведите обновление системы. По необходимости воспользоваться утилитой *usermod*

>[!NOTE]
>[Список доменных учётных записей для входа](login_password.csv)

<<<<<<< HEAD
3. Написать bash скрипт по поиску сообщений со статусом *Warning* в лог файле демона *mysqld*. Файл находится `/var/log/mysqld.log`
=======
1. Написать bash скрипт по поиску сообщений со статусом *Warning* в лог файле демона *mysqld*. Файл находится `/var/log/mysqld.log`
>>>>>>> 1caa27036ce1a7b61fdd0c9e0dd61352e8c129b0

1. Используя *cron* организовать отправку результатов работы bash скрипта из предыдущего задания на Вашу почту каждую минуту.

1. Установить на РЕД ОС систему для хостинга Git репозиториев **Gitea**.